{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2024-12-16 07:09:46.075668",
 "css": ".main {\n    text-align:center;\n    width:100%;\n}\n\n.table1 {\n    text-align:center;\n    width:100%;\n    line-height: 1;\n}\n\n.table1 th {\n    color:black;\n    background-color: #d9e2f3;\n    font-weight:600;\n    text-align:center;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Payroll Entry",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{% set salary_slips = frappe.get_all('Salary Slip', \r\n    filters={'docstatus': 0, 'payroll_entry': doc.name}, \r\n    fields=['*']) %}\r\n\r\n{% for salary in salary_slips %}\r\n    {% set manifests = frappe.db.get_all(\r\n        \"Manifest\", \r\n        filters={\r\n            \"docstatus\": 1, \r\n            \"driver\": salary.employee, \r\n            \"date\": [\"BETWEEN\", [doc.start_date, doc.end_date]]\r\n        }, \r\n        fields=[\"route\", \"COUNT(name) as count\", \"SUM(total_revenue) as total_revenue\", \r\n                \"SUM(daily_driver_amount) as daily_driver_amount\", \r\n                \"SUM(over_target_amount) as over_target_amount\"]\r\n    ) %}\r\n    \r\n    {% set slips = frappe.get_doc(\"Salary Slip\", salary.name) %}\r\n    {% set manifest = manifests[0] if manifests else {} %}\r\n    \r\n    <div class=\"main\">\r\n        <p>{{ salary.employee }} - {{ salary.employee_name }}</p>\r\n        <table class=\"table1\" border=1 dir=\"rtl\">\r\n            <tbody>\r\n                <!-- Header Row -->\r\n                <tr>\r\n                    <th rowspan=\"2\">\u0628\u064a\u0627\u0646\u0627\u062a</th>\r\n                    <th colspan=\"2\">\u0645\u0631\u062a\u0628 \u0634\u0647\u0631</th>\r\n                    <th>\u0623\u064a\u0627\u0645 \u0627\u0644\u062d\u0636\u0648\u0631</th>\r\n                    <th>\u0639\u062f\u062f \u0627\u0644\u0648\u0631\u062f\u064a\u0627\u062a</th>\r\n                    <th>\u0627\u0644\u062a\u0627\u0631\u062c\u062a</th>\r\n                    <th>\u0627\u0644\u062e\u0637</th>\r\n                    <th>\u0627\u0644\u0627\u064a\u0631\u0627\u062f</th>\r\n                    <th>\u0627\u0644\u0642\u0628\u0636 \u0627\u0644\u064a\u0648\u0645\u064a</th>\r\n                    <th>\u062d\u0627\u0644\u0629 \u0627\u0644\u062a\u0639\u064a\u064a\u0646</th>\r\n                    <th>\u0633\u0648\u0627\u0644\u0628 \u0645\u0631\u062d\u0644\u0629</th>\r\n                </tr>\r\n                <!-- Data Row -->\r\n                <tr>\r\n                    <td colspan=\"2\">{{ frappe.utils.formatdate(salary.start_date, \"MM-yyyy\") }}</td>\r\n                    <td>{{ salary.total_working_days or 0 }}</td>\r\n                    <td>{{ manifest.count or 0 }}</td>\r\n                    {% set target_monthly = slips.earnings | selectattr(\"salary_component\", \"equalto\", \"\u062a\u0627\u0631\u062c\u062a \u0634\u0647\u0631\u0649\") | first %}\r\n                    <td>{{ target_monthly.amount if target_monthly else 0 }}</td>\r\n                    <td>{{ manifest.route or '-' }}</td>\r\n                    <td>{{ manifest.total_revenue or 0 }}</td>\r\n                    <td>{{ manifest.daily_driver_amount or 0 }}</td>\r\n                    <td>{{ frappe.db.get_value(\"Employee\", salary.employee, \"custom_secondary_status\") or '-' }}</td>\r\n                    <td>0</td>\r\n                </tr>\r\n                <!-- Earnings Section -->\r\n                <tr>\r\n                    <th rowspan=\"2\">\u0625\u0633\u062a\u062d\u0642\u0627\u0642\u0627\u062a</th>\r\n                    <th colspan=\"2\">\u0646\u0633\u0628\u0629 \u0627\u062e\u0631 \u0627\u0644\u0634\u0647\u0631</th>\r\n                    <th colspan=\"2\">\u0642\u064a\u0645\u0629 \u0646\u0633\u0628\u0629 \u0627\u062e\u0631 \u0627\u0644\u0634\u0647\u0631</th>\r\n                    <th>\u0627\u0644\u0645\u0631\u062a\u0628 \u0627\u0644\u062b\u0627\u0628\u062a</th>\r\n                    <th>\u0646\u0633\u0628\u0629 \u0627\u0644\u062a\u0627\u0631\u062c\u062a</th>\r\n                    <th>\u0642\u064a\u0645\u0629 \u0646\u0633\u0628\u0629 \u0627\u0644\u062a\u0627\u0631\u062c\u062a</th>\r\n                    <th>\u0645\u0643\u0627\u0641\u0623\u0629 \u0625\u0646\u062a\u0638\u0627\u0645</th>\r\n                    <th>\u0645\u0643\u0627\u0641\u0623\u0629 \u062b\u0628\u0627\u062a</th>\r\n                    <th>\u0646\u0642\u062f\u064a \u0645\u0636\u0627\u0641</th>\r\n                </tr>\r\n                <tr>\r\n                    <td colspan=\"2\">&nbsp;</td>\r\n                    {% set end_month_target = slips.earnings | selectattr(\"salary_component\", \"equalto\", \"\u0642\u064a\u0645\u0629 \u0646\u0633\u0628\u0629 \u0627\u0644\u062a\u0627\u0631\u062c\u062a \u0627\u0644\u064a\u0648\u0645\u0649 \u0645\u0631\u062d\u0644\u0629 \u0644\u0627\u062e\u0631 \u0627\u0644\u0634\u0647\u0631\") | first %}\r\n                    <td colspan=\"2\">{{ end_month_target.amount if end_month_target else 0 }}</td>\r\n                    {% set fixed_salary = slips.earnings | selectattr(\"salary_component\", \"equalto\", \"\u0645\u0631\u062a\u0628 \u062b\u0627\u0628\u062a\") | first %}\r\n                    <td>{{ fixed_salary.amount if fixed_salary else 0 }}</td>\r\n                    <td>0</td>\r\n                    <td>0</td>\r\n                    {% set regular_bonus = slips.earnings | selectattr(\"salary_component\", \"equalto\", \"\u0645\u0643\u0627\u0641\u0623\u0629 \u0627\u0646\u062a\u0638\u0627\u0645\") | first %}\r\n                    <td>{{ regular_bonus.amount if regular_bonus else 0 }}</td>\r\n                    {% set stability_bonus = slips.earnings | selectattr(\"salary_component\", \"equalto\", \"\u0645\u0643\u0627\u0641\u0623\u0629 \u062b\u0628\u0627\u062a\") | first %}\r\n                    <td>{{ stability_bonus.amount if stability_bonus else 0 }}</td>\r\n                    <td>{{ manifest.over_target_amount or 0 }}</td>\r\n                </tr>\r\n                <!-- Deductions Section -->\r\n                <tr>\r\n                    <th rowspan=\"2\">\u0625\u0633\u062a\u0642\u0637\u0627\u0639\u0627\u062a</th>\r\n                    <th>\u0627\u0644\u0636\u0631\u064a\u0628\u0629</th>\r\n                    <th>\u0627\u0644\u0632\u0645\u0627\u0644\u0629</th>\r\n                    <th>\u062a\u0623\u0645\u064a\u0646\u0627\u062a</th>\r\n                    <th>\u0627\u0644\u0633\u0644\u0641</th>\r\n                    <th>\u062e\u0635\u0645 \u0646\u0642\u062f\u064a</th>\r\n                    <th>\u0627\u0644\u062c\u0632\u0627\u0621</th>\r\n                    <th>\u062a\u062e\u0641\u064a\u0636 \u062c\u0632\u0627\u0621 25% \u0644\u0644\u0625\u0646\u062a\u0638\u0627\u0645</th>\r\n                    <th colspan=\"2\">\u062a\u062e\u0641\u064a\u0636 \u062c\u0632\u0627\u0621 25% \u0627\u0644\u062a\u0627\u0631\u062c\u062a</th>\r\n                    <th>\u0635\u0627\u0641\u064a \u0627\u0644\u062c\u0632\u0627\u0621</th>\r\n                </tr>\r\n                <tr>\r\n                    {% set tax = slips.deductions | selectattr(\"salary_component\", \"equalto\", \"\u0627\u0644\u0636\u0631\u064a\u0628\u0629\") | first %}\r\n                    <td>{{ tax.amount if tax else 0 }}</td>\r\n                    {% set fellowship = slips.deductions | selectattr(\"salary_component\", \"equalto\", \"\u0627\u0644\u0632\u0645\u0627\u0644\u0629\") | first %}\r\n                    <td>{{ fellowship.amount if fellowship else 0 }}</td>\r\n                    {% set insurance = slips.deductions | selectattr(\"salary_component\", \"equalto\", \"\u062a\u0623\u0645\u064a\u0646\u0627\u062a\") | first %}\r\n                    <td>{{ insurance.amount if insurance else 0 }}</td>\r\n                    <td>{{ salary.total_loan_repayment or 0 }}</td>\r\n                    {% set cash_deduction = slips.deductions | selectattr(\"salary_component\", \"equalto\", \"\u062e\u0635\u0645 \u0646\u0642\u062f\u064a\") | first %}\r\n                    <td>{{ cash_deduction.amount if cash_deduction else 0 }}</td>\r\n                    {% set penalty = slips.deductions | selectattr(\"salary_component\", \"equalto\", \"Penalty\") | first %}\r\n                    <td>{{ penalty.amount if penalty else 0 }}</td>\r\n                    <td>0</td>\r\n                    <td colspan=\"2\">0</td>\r\n                    <td>{{ penalty.amount if penalty else 0 }}</td>\r\n                </tr>\r\n                <!-- Final Summary -->\r\n                <tr>\r\n                    <th rowspan=\"2\">\u0648\u0635\u0641 \u0627\u0644\u062c\u0632\u0627\u0621</th>\r\n                    <td colspan=\"7\" rowspan=\"2\">&nbsp;</td>\r\n                    <th>\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0631\u0627\u062a\u0628</th>\r\n                    <th>\u0627\u0644\u0645\u0633\u062a\u0642\u0637\u0639</th>\r\n                    <th>\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0627\u062a\u0628</th>\r\n                </tr>\r\n                <tr>\r\n                    <td>{{ salary.gross_pay }}</td>\r\n                    <td>{{ salary.total_deduction }}</td>\r\n                    <td>{{ salary.net_pay }}</td>\r\n                </tr>\r\n                <!-- Percentage Breakdown -->\r\n                <tr>\r\n                    <th colspan=\"11\">\u0634\u0631\u062d \u0627\u0644\u0646\u0633\u0628</th>\r\n                </tr>\r\n                <tr>\r\n                    <th>\u0627\u0644\u0643\u0648\u062f</th>\r\n                    <th>\u0627\u0644\u0648\u0631\u062f\u064a\u0627\u062a</th>\r\n                    <th>\u0627\u0644\u062e\u0637</th>\r\n                    <th>\u0627\u0644\u0627\u064a\u0631\u0627\u062f</th>\r\n                    <th colspan=\"2\">\u0646\u0633\u0628\u0629 \u0627\u062e\u0631 \u0627\u0644\u0634\u0647\u0631</th>\r\n                    <th colspan=\"2\">\u0642\u064a\u0645\u0629 \u0646\u0633\u0628\u0629 \u0627\u062e\u0631 \u0627\u0644\u0634\u0647\u0631</th>\r\n                    <th>\u0646\u0633\u0628\u0629 \u0627\u0644\u062a\u0627\u0631\u062c\u062a</th>\r\n                    <th>\u0642\u064a\u0645\u0629 \u0646\u0633\u0628\u0629 \u0627\u0644\u062a\u0627\u0631\u062c\u062a</th>\r\n                    <th>\u0627\u0644\u062a\u0627\u0631\u062c\u062a</th>\r\n                </tr>\r\n                <tr>\r\n                    <td>{{ salary.employee }}</td>\r\n                    <td>{{ manifest.count or 0 }}</td>\r\n                    <td>{{ manifest.route or '-' }}</td>\r\n                    <td>{{ manifest.total_revenue or 0 }}</td>\r\n                    <td colspan=\"2\">0</td>\r\n                    <td colspan=\"2\">{{ end_month_target.amount if end_month_target else 0 }}</td>\r\n                    <td>0</td>\r\n                    <td>0</td>\r\n                    <td>{{ target_monthly.amount if target_monthly else 0 }}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n{% endfor %}\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2024-12-18 01:28:55.302349",
 "modified_by": "Administrator",
 "module": "Englizya",
 "name": "\u0634\u0631\u064a\u0637 \u0627\u0644\u0645\u0631\u062a\u0628 \u0645\u062c\u0645\u0639",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}